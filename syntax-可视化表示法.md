Luna是数据处理语言并且如别的语言一样有自己的语法。

不同于别的语言，Luna有不止一种语法：可视化、文本。

可视化表示法利用文本表示法定义组件表达式。

# 可视化表示法
在设计可视化表示法的过程中，大量强调生产效率和人类工程学。

每个元素和动作都被细心设计来易于表达用户的想法，快速理解结果，清晰地查看所有数据的传输转换。

必须学会如何讲这门语言，无论怎样，都值得做，因为就连核心编码人员都倾向于采用Luna来构建高级数据处理工作流（而不是写代码）。

Luna的使命之一就是不断提升用Luna来完成工作的方式，用户的反馈和建议非常重要。

有任何有关可视化表示法应用的想法，请[告知作者][0]。

## 导航

Luna可视化编辑器是张画布，允许流畅的操作，这样用户总是聚焦在重要的事情上。

- 两根手指拖拽动作或鼠标滚轮按键来平铺视图。
- 两根手指捏叉动作或鼠标右边按键来缩放试图。
- 一根手指点击动作或鼠标左边按键来选择节点（被选中的节点从后台返回前台来执行）。
- 一根手指双击动作或鼠标左边按键来进入节点。
- 双击背景或可视化编辑器顶部的breadcrumb控件来查看亲代节点。

## 节点
可视化表达方式中，节点时最主要的入口，和别的节点一起组成数据流图。

### 值节点
是最常用的节点类型。

表示任何有效的Luna值，包括数据处理函数。

从上层看，一个值节点可以产生数据，修改或传递数据到某些外部服务（Web或DB）。

值节点由若干可视化元素组成：

![][1]

- 节点表达式
  - 1
  - 任何有效的Luna代码，特别是函数名，例如一个把两个对象相加的节点名为“+”
- 节点名称
  - 2
  - 描述节点在图中的角色，别的节点通过该名称引用此节点
- 输入端口和输出端口
  - 3、4
  - 节点通信的门户
  - 数据从左侧的输入端口进、根据节点表达式处理、结果从右侧的输出端口出
  - 端口颜色表明流过的数据类型
  - 数据类型[后边][2]详述
- 自身端口
  - 5
  - Luna也是面向对象的语言
  - 意味着节点之间流动的任何数据片段不只是信息，可以响应命令
  - 就像让车停止、让狗喊叫
  - 又如数值增长、列表排序
  - 如果数据连接到自身端口，节点表达式说明要对数据做什么
  - 一个经验法则（a rule of thumb）是若想处理数据片段就连接到自身端口
  - 有关[自定义类型][3]后边详述

### 引用节点
有时候用户不想处理数据，而是想检查解构数据。

需要注意的是，不是对数据造成影响，而是允许观察，叫做引用节点。

放在[模式匹配][4]一节详述。

包含特殊的端口，接受用户想要检查析构的数据。

![][5]

## 创建节点
总是在Luna探测器的帮助下创建节点。然而，有几个选项来启动节点、引导用户的意图。

- 按下<kbd>Tab</kbd>键搜索所有可用的组件。
- 选择一个节点然后按下<kbd>Tab</kbd>键引导探测器查找能处理结果的函数。

## 连接和断开节点
连接新的数据流，永续必须创建输出接口和输入接口之间的连接（包括自身接口）。

没有最好的方法，取决于用户的喜好、图的复杂程度、缩放水平等等。

Luna提供集中可选的方式来连接和断开节点，用户自行选择最适合自己情形的。

### 连接节点

- 拖拽
- 点击
- 画笔
- 创建节点顺手而为

---
[0]:https://discuss.luna-lang.org/
[1]:./images/node-with-self-and-parameters.png
[2]:./types.md
[3]:./classes.md
[4]:./pattern-matching.md
[5]:./images/reference-node.png